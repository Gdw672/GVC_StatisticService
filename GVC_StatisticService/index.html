<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Отчет по данным</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h3>Отчет по данным</h3>
  <button id="toggleButton">Повернуть таблицу</button>
  <div id="tableContainer"></div>

  <h4>График по тегам</h4>
  <div id="listsContainer"></div>
  <button id="addListButton">+ Добавить новый график</button>

  <h4>Графики</h4>
  <div id="chartsContainer"></div>

  <!-- Подключаем модули -->
  <script src="table-manager.js"></script>
  <script src="chart-manager.js"></script>
  <script>
    // Инициализация приложения
    const APP_CONFIG = {
      apiUrl: "http://localhost:5134/api/Database/testData",
      tableContainer: "tableContainer",
      listsContainer: "listsContainer",
      chartsContainer: "chartsContainer",
      toggleButton: "toggleButton",
      addListButton: "addListButton"
    };

    // Глобальное состояние приложения
    window.AppState = {
      originalData: [],
      selectedParamsByList: [[]],
      selectedDates: [],
      activeListIndex: 0,
      transposed: false,
      chartsVisible: [] // массив булевых значений для видимости графиков
    };

    // Инициализация модулей
    // Инициализация модулей
    document.addEventListener('DOMContentLoaded', async () => {
      // Инициализируем таблицу
      TableManager.init(APP_CONFIG);
      
      // Инициализируем графики и сделаем их доступными глобально
      window.ChartManager = ChartManager;
      ChartManager.init(APP_CONFIG);
      
      // Загружаем данные
      await TableManager.loadData();
    });
  </script>
</body>
</html>